<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>RaftKVDatabase (JSimpleDB 2.0.0-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RaftKVDatabase (JSimpleDB 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RaftKVDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jsimpledb/kv/raft/NonLeaderRole.html" title="class in org.jsimpledb.kv.raft"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jsimpledb/kv/raft/RaftKVDatabase.html" target="_top">Frames</a></li>
<li><a href="RaftKVDatabase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.jsimpledb.kv.raft</div>
<h2 title="Class RaftKVDatabase" class="title">Class RaftKVDatabase</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.jsimpledb.kv.raft.RaftKVDatabase</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">RaftKVDatabase</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></pre>
<div class="block">A distributed <a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv"><code>KVDatabase</code></a> based on the Raft consensus algorithm.

 <p>
 Raft defines a distributed consensus algorithm for maintaining a shared state machine.
 Each Raft node maintains a complete copy of the state machine. Cluster nodes elect a
 leader who collects and distributes updates and provides for consistent reads.
 As long as as a node is part of a majority, the state machine is fully operational.

 <p>
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html" title="class in org.jsimpledb.kv.raft"><code>RaftKVDatabase</code></a> turns this into a transactional key/value database with linearizable ACID semantics as follows:
  <ul>
  <li>The Raft state machine is the key/value store data.</li>
  <li>Unapplied log entries are stored on disk as serialized mutations, and also cached in memory.</li>
  <li>On leaders only, committed log entries are not applied immediately; instead they kept around for time at least
      <i>T<sub>max</sub></i> since creation, where <i>T<sub>max</sub></i> is the maximum supported transaction duration.
      This caching is subject to <i>M<sub>max</sub></i>, which limits the total memory used; if reached, these log entries
      are applied early.</li>
  <li>Concurrent transactions are supported through a simple optimistic locking MVCC scheme (same as used by
      <a href="../../../../org/jsimpledb/kv/mvcc/SnapshotKVDatabase.html" title="class in org.jsimpledb.kv.mvcc"><code>SnapshotKVDatabase</code></a>):
      <ul>
      <li>Transactions execute locally until commit time, using a <a href="../../../../org/jsimpledb/kv/mvcc/MutableView.html" title="class in org.jsimpledb.kv.mvcc"><code>MutableView</code></a> to collect mutations.
          The <a href="../../../../org/jsimpledb/kv/mvcc/MutableView.html" title="class in org.jsimpledb.kv.mvcc"><code>MutableView</code></a> is based on the local node's most recent log entry
          (whether committed or not); this is called the <i>base term and index</i> for the transaction.</li>
      <li>On commit, the transaction's <a href="../../../../org/jsimpledb/kv/mvcc/Reads.html" title="class in org.jsimpledb.kv.mvcc"><code>Reads</code></a>, <a href="../../../../org/jsimpledb/kv/mvcc/Writes.html" title="class in org.jsimpledb.kv.mvcc"><code>Writes</code></a>,
          base index and term, and any config change are <a href="../../../../org/jsimpledb/kv/raft/msg/CommitRequest.html" title="class in org.jsimpledb.kv.raft.msg">sent</a> to the leader.</li>
      <li>The leader confirms that the log entry corresponding to the transaction's base index is either not yet applied,
          or was its most recently applied log entry. If this is not the case, then the transaction's base log entry
          is too old (older than <i>T<sub>max</sub></i>, or was applied and discarded early due to memory pressure),
          and so the transaction is rejected with a <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>.
      <li>The leader verifies that the the log entry term matches the transaction's base term; if not, the base log entry
          has been overwritten, and the transaction is rejected with a <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>.
      <li>The leader confirms that the <a href="../../../../org/jsimpledb/kv/mvcc/Writes.html" title="class in org.jsimpledb.kv.mvcc"><code>Writes</code></a> associated with log entries after the transaction's base log entry
          do not create <a href="../../../../org/jsimpledb/kv/mvcc/Reads.html#isConflict(org.jsimpledb.kv.mvcc.Mutations)">conflicts</a> when compared against the transaction's
          <a href="../../../../org/jsimpledb/kv/mvcc/Reads.html" title="class in org.jsimpledb.kv.mvcc"><code>Reads</code></a>. If so, the transaction is rejected with a <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>.</li>
      <li>The leader adds a new log entry consisting of the transaction's <a href="../../../../org/jsimpledb/kv/mvcc/Writes.html" title="class in org.jsimpledb.kv.mvcc"><code>Writes</code></a> (and any config change) to its log.
          The associated term and index become the transaction's <i>commit term and index</i>; the leader then
          <a href="../../../../org/jsimpledb/kv/raft/msg/CommitResponse.html" title="class in org.jsimpledb.kv.raft.msg">replies</a> to the follower with this information.</li>
      <li>If/when the follower sees a <i>committed</i> (in the Raft sense) log entry appear in its log matching the
          transaction's commit term and index, then the transaction is complete.</li>
      <li>As an optimization, when the leader sends a log entry to the same follower who committed the corresponding
          transaction in the first place, only the transaction ID is sent, because the follower already has the data.</li>
      </ul>
  </li>
  <li>For transactions occurring on a leader, the logic is similar except of course no network communication occurs.</li>
  <li>For read-only transactions, the leader does not create a new log entry; instead, the transaction's commit
      term and index are set to the base term and index, and the leader also calculates its current "leader lease timeout",
      which is the earliest time at which it is possible for another leader to be elected.
      This is calculated as the time in the past at which the leader sent <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a>'s to a majority of followers
      who have since responded, plus the <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMinElectionTimeout(int)">minimum election timeout</a>, minus a small adjustment
      for possible clock drift (this assumes all nodes have the same minimum election timeout configured). If the current
      time is prior to the leader lease timeout, the transaction may be committed as soon as log entry corresponding to the
      commit term and index is committed (it may already be); otherwise, the current time is returned to the follower
      as minimum required leader lease timeout before the transaction may be committed.</li>
  <li>Every <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a> includes the leader's current timestamp and leader lease timeout, so followers can commit
      any waiting read-only transactions. Leaders keep track of which followers are waiting on which leader lease
      timeout values, and when the leader lease timeout advances to allow a follower to commit a transaction, the follower
      is immediately notified.</li>
  <li>Optional weaker consistency guarantees are availble on a per-transaction bases; see
      <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#setConsistency(org.jsimpledb.kv.raft.Consistency)"><code>RaftKVTransaction.setConsistency()</code></a>.</li>
  </ul>

 <p><b>Limitations</b></p>

 <ul>
  <li>A transaction's mutations must fit in memory.</li>
  <li>An <a href="../../../../org/jsimpledb/kv/mvcc/AtomicKVStore.html" title="interface in org.jsimpledb.kv.mvcc"><code>AtomicKVStore</code></a> is required to store local persistent state.</li>
  <li>All nodes must be configured with the same <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMinElectionTimeout(int)">minimum election timeout</a>.
      This guarantees that the leader's lease timeout calculation is valid.</li>
  <li>Due to the optimistic locking approach used, this implementation will perform poorly when there is a high
      rate of conflicting transactions; the result will be many transaction retries.</li>
  <li>Performance will suffer when the amount of data associated with a typical transaction cannot be delivered
      quickly and reliably over the network.</li>
 </ul>

 <p>
 In general, the algorithm should function correctly under all non-Byzantine conditions. The level of difficultly
 the system is experiencing, due to contention, network errors, etc., can be measured in terms of:
 <ul>
  <li>The average amount of time it takes to commit a transaction</li>
  <li>The frequency of <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>'s</li>
 </ul>

 <p><b>Cluster Configuration</b></p>

 <p>
 Instances support dynamic cluster configuration changes at runtime.

 <p>
 Initially, all nodes are in an <i>unconfigured</i> state, where nothing has been added to the Raft log yet and no
 cluster is defined. Unconfigured nodes are passive: they stay in follower mode (i.e., they will not start elections),
 and they disallow local transactions that make any changes other than as described below to create a new cluster.

 <p>
 An unconfigured node becomes configured when either:
 <ol>
  <li><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#configChange"><code>RaftKVTransaction.configChange()</code></a> is invoked and committed within
      a local transaction, which creates a new single node cluster and commits the first log entry; or</li>
  <li>An <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a> is received from a leader of some existing cluster, in which case the node
      records the cluster ID thereby joining the cluster (see below), and applies the received cluster configuration.</li>
 </ol>

 <p>
 A node is configured if and only if it has recorded one or more log entries. The very first log entry
 always contains the initial cluster configuration (containing only the node that created it, whether local or remote),
 so any node that has a non-empty log is configured.

 <p>
 Newly created clusters are assigned a random 32-bit cluster ID (option #1 above). This ID is included in all messages sent
 over the network, and adopted by unconfigured nodes that join the cluster (via option #2 above). Configured nodes discard
 incoming messages containing a cluster ID different from the one they have joined. This prevents data corruption that can
 occur if nodes from two different clusters are inadvertently "mixed" together.

 <p>
 Once a node joins a cluster with a specific cluster ID, it cannot be reassigned to a different cluster without first
 returning it to the unconfigured state; to do that, it must be shut it down and its persistent state deleted.

 <p><b>Configuration Changes</b></p>

 <p>
 Once a node is configured, a separate issue is whether the node is <i>included</i> in its own configuration, i.e., whether
 the node is a member of its cluster according to the current cluster configuration. A node that is not a member of its
 cluster does not count its own vote to determine committed log entries (if a leader), and does not start elections
 (if a follower). However, it will accept and respond to incoming <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a>s and <a href="../../../../org/jsimpledb/kv/raft/msg/RequestVote.html" title="class in org.jsimpledb.kv.raft.msg"><code>RequestVote</code></a>s.

 <p>
 In addition, leaders follow these rules with respect to configuration changes:
 <ul>
  <li>If a leader is removed from a cluster, it remains the leader until the corresponding configuration change
      is committed (not counting its own vote), and then steps down (i.e., reverts to follower).</li>
  <li>If a follower is added to a cluster, the leader immediately starts sending that follower <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a>s.</li>
  <li>If a follower is removed from a cluster, the leader continues to send that follower <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a>s
      until the follower acknowledges receipt of the log entry containing the configuration change.</li>
  <li>Leaders defer configuration changes until they have committed at least one log entry in the current term
      (see <a href="https://groups.google.com/d/msg/raft-dev/t4xj6dJTP6E/d2D9LrWRza8J">this discussion</a>).</li>
  <li>Configuration changes that remove the last node in a cluster are disallowed.</li>
  <li>Only one configuration change may take place at a time.</li>
 </ul>

 <p><b>Follower Probes</b></p>

 <p>
 This implementation includes a modification to the Raft state machine to avoid unnecessary, disruptive elections
 when a node or nodes is disconnected from, and then reconnected to, the majority.

 <p>
 When a follower's election timeout fires, before converting into a candidate, the follower is required to verify
 communication with a majority of the cluster using <a href="../../../../org/jsimpledb/kv/raft/msg/PingRequest.html" title="class in org.jsimpledb.kv.raft.msg">PingRequest</a> messages. Only when the follower has
 successfully done so may it become a candidate.  While in this intermediate "probing" mode, the follower responds
 normally to incoming messages. In particular, if the follower receives a valid <a href="../../../../org/jsimpledb/kv/raft/msg/AppendRequest.html" title="class in org.jsimpledb.kv.raft.msg"><code>AppendRequest</code></a> from the leader, it
 reverts back to normal operation.

 <p>
 This behavior is optional, but enabled by default (see <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setFollowerProbingEnabled(boolean)"><code>setFollowerProbingEnabled()</code></a>);

 <p><b>Key Watches</b></p>

 <p>
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#watchKey(byte[])">Key watches</a> and <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#mutableSnapshot()">mutable snapshots</a>
 are supported.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="https://raftconsensus.github.io/">The Raft Consensus Algorithm</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_COMMIT_TIMEOUT">DEFAULT_COMMIT_TIMEOUT</a></strong></code>
<div class="block">Default transaction commit timeout (5000).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_HEARTBEAT_TIMEOUT">DEFAULT_HEARTBEAT_TIMEOUT</a></strong></code>
<div class="block">Default heartbeat timeout (200ms).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_ELECTION_TIMEOUT">DEFAULT_MAX_ELECTION_TIMEOUT</a></strong></code>
<div class="block">Default maximum election timeout (1000ms).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_TRANSACTION_DURATION">DEFAULT_MAX_TRANSACTION_DURATION</a></strong></code>
<div class="block">Default maximum supported outstanding transaction duration (5000ms).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_UNAPPLIED_LOG_MEMORY">DEFAULT_MAX_UNAPPLIED_LOG_MEMORY</a></strong></code>
<div class="block">Default maximum supported applied log entry memory usage (104857600L bytes).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MIN_ELECTION_TIMEOUT">DEFAULT_MIN_ELECTION_TIMEOUT</a></strong></code>
<div class="block">Default minimum election timeout (750ms).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_TCP_PORT">DEFAULT_TCP_PORT</a></strong></code>
<div class="block">Default TCP port (9660) used to communicate with peers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#OPTION_CONSISTENCY">OPTION_CONSISTENCY</a></strong></code>
<div class="block">Option key for <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction(java.util.Map)"><code>createTransaction(Map)</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#RaftKVDatabase()">RaftKVDatabase</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction()">createTransaction</a></strong>()</code>
<div class="block">Create a new transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction(org.jsimpledb.kv.raft.Consistency)">createTransaction</a></strong>(<a href="../../../../org/jsimpledb/kv/raft/Consistency.html" title="enum in org.jsimpledb.kv.raft">Consistency</a>&nbsp;consistency)</code>
<div class="block">Create a new transaction with the specified consistency.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction(java.util.Map)">createTransaction</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,?&gt;&nbsp;options)</code>
<div class="block">Create a new transaction with the specified options.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getClusterId()">getClusterId</a></strong>()</code>
<div class="block">Retrieve the unique 32-bit ID for this node's cluster.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCommitIndex()">getCommitIndex</a></strong>()</code>
<div class="block">Get this instance's current commit index..</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCommitTimeout()">getCommitTimeout</a></strong>()</code>
<div class="block">Get the configured default transaction commit timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentConfig()">getCurrentConfig</a></strong>()</code>
<div class="block">Retrieve the current cluster configuration as understood by this node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../org/jsimpledb/kv/raft/Role.html" title="class in org.jsimpledb.kv.raft">Role</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentRole()">getCurrentRole</a></strong>()</code>
<div class="block">Get this instance's current role: leadeer, follower, or candidate.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentTerm()">getCurrentTerm</a></strong>()</code>
<div class="block">Get this instance's current term.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getHeartbeatTimeout()">getHeartbeatTimeout</a></strong>()</code>
<div class="block">Get the configured heartbeat timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getIdentity()">getIdentity</a></strong>()</code>
<div class="block">Get this node's Raft identity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getLastAppliedIndex()">getLastAppliedIndex</a></strong>()</code>
<div class="block">Get this instance's last applied log entry index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getLastAppliedTerm()">getLastAppliedTerm</a></strong>()</code>
<div class="block">Get this instance's last applied log entry term.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getLogDirectory()">getLogDirectory</a></strong>()</code>
<div class="block">Get the directory in which uncommitted log entries are stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getMaxElectionTimeout()">getMaxElectionTimeout</a></strong>()</code>
<div class="block">Get the configured maximum election timeout.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getMaxTransactionDuration()">getMaxTransactionDuration</a></strong>()</code>
<div class="block">Get the configured maximum supported duration for outstanding transactions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getMaxUnappliedLogMemory()">getMaxUnappliedLogMemory</a></strong>()</code>
<div class="block">Get the configured maximum allowed memory used for unapplied log entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getMinElectionTimeout()">getMinElectionTimeout</a></strong>()</code>
<div class="block">Get the configured minimum election timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getOpenTransactions()">getOpenTransactions</a></strong>()</code>
<div class="block">Get the set of open transactions associated with this database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/jsimpledb/kv/raft/LogEntry.html" title="class in org.jsimpledb.kv.raft">LogEntry</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getUnappliedLog()">getUnappliedLog</a></strong>()</code>
<div class="block">Get the unapplied <a href="../../../../org/jsimpledb/kv/raft/LogEntry.html" title="class in org.jsimpledb.kv.raft"><code>LogEntry</code></a>s in this instance's Raft log.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getUnappliedLogMemoryUsage()">getUnappliedLogMemoryUsage</a></strong>()</code>
<div class="block">Get the estimated total memory used by unapplied log entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#isClusterMember()">isClusterMember</a></strong>()</code>
<div class="block">Determine whether this node thinks that it is part of its cluster, as determined by its
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentConfig()">current configuration</a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#isClusterMember(java.lang.String)">isClusterMember</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;node)</code>
<div class="block">Determine whether this node thinks that the specified node is part of the cluster, as determined by its
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentConfig()">current configuration</a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#isConfigured()">isConfigured</a></strong>()</code>
<div class="block">Determine whether this instance is configured.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#isFollowerProbingEnabled()">isFollowerProbingEnabled</a></strong>()</code>
<div class="block">Determine whether follower probing prior to becoming a candidate is enabled.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setCommitTimeout(int)">setCommitTimeout</a></strong>(int&nbsp;timeout)</code>
<div class="block">Configure the default transaction commit timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setFollowerProbingEnabled(boolean)">setFollowerProbingEnabled</a></strong>(boolean&nbsp;followerProbingEnabled)</code>
<div class="block">Configure whether followers should be required to probe for network connectivity with a majority of the
 cluster after an election timeout prior to becoming a candidate.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setHeartbeatTimeout(int)">setHeartbeatTimeout</a></strong>(int&nbsp;timeout)</code>
<div class="block">Configure the heartbeat timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setIdentity(java.lang.String)">setIdentity</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;identity)</code>
<div class="block">Configure the Raft identity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setKVStore(org.jsimpledb.kv.mvcc.AtomicKVStore)">setKVStore</a></strong>(<a href="../../../../org/jsimpledb/kv/mvcc/AtomicKVStore.html" title="interface in org.jsimpledb.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</code>
<div class="block">Configure the <a href="../../../../org/jsimpledb/kv/mvcc/AtomicKVStore.html" title="interface in org.jsimpledb.kv.mvcc"><code>AtomicKVStore</code></a> in which local persistent state is stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setLogDirectory(java.io.File)">setLogDirectory</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</code>
<div class="block">Configure the directory in which uncommitted log entries are stored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxElectionTimeout(int)">setMaxElectionTimeout</a></strong>(int&nbsp;timeout)</code>
<div class="block">Configure the maximum election timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxTransactionDuration(int)">setMaxTransactionDuration</a></strong>(int&nbsp;duration)</code>
<div class="block">Configure the maximum supported duration for outstanding transactions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxUnappliedLogMemory(long)">setMaxUnappliedLogMemory</a></strong>(long&nbsp;memory)</code>
<div class="block">Configure the maximum allowed memory used for unapplied log entries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMinElectionTimeout(int)">setMinElectionTimeout</a></strong>(int&nbsp;timeout)</code>
<div class="block">Configure the minimum election timeout.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setNetwork(org.dellroad.stuff.net.Network)">setNetwork</a></strong>(org.dellroad.stuff.net.Network&nbsp;network)</code>
<div class="block">Configure the <code>Network</code> to use for inter-node communication.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#start()">start</a></strong>()</code>
<div class="block">Start this instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#stop()">stop</a></strong>()</code>
<div class="block">Stop this instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_MIN_ELECTION_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MIN_ELECTION_TIMEOUT</h4>
<pre>public static final&nbsp;int DEFAULT_MIN_ELECTION_TIMEOUT</pre>
<div class="block">Default minimum election timeout (750ms).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMinElectionTimeout(int)"><code>setMinElectionTimeout(int)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_MIN_ELECTION_TIMEOUT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_MAX_ELECTION_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_ELECTION_TIMEOUT</h4>
<pre>public static final&nbsp;int DEFAULT_MAX_ELECTION_TIMEOUT</pre>
<div class="block">Default maximum election timeout (1000ms).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxElectionTimeout(int)"><code>setMaxElectionTimeout(int)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_MAX_ELECTION_TIMEOUT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_HEARTBEAT_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_HEARTBEAT_TIMEOUT</h4>
<pre>public static final&nbsp;int DEFAULT_HEARTBEAT_TIMEOUT</pre>
<div class="block">Default heartbeat timeout (200ms).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setHeartbeatTimeout(int)"><code>setHeartbeatTimeout(int)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_HEARTBEAT_TIMEOUT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_MAX_TRANSACTION_DURATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_TRANSACTION_DURATION</h4>
<pre>public static final&nbsp;int DEFAULT_MAX_TRANSACTION_DURATION</pre>
<div class="block">Default maximum supported outstanding transaction duration (5000ms).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxTransactionDuration(int)"><code>setMaxTransactionDuration(int)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_MAX_TRANSACTION_DURATION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_MAX_UNAPPLIED_LOG_MEMORY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_UNAPPLIED_LOG_MEMORY</h4>
<pre>public static final&nbsp;long DEFAULT_MAX_UNAPPLIED_LOG_MEMORY</pre>
<div class="block">Default maximum supported applied log entry memory usage (104857600L bytes).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxUnappliedLogMemory(long)"><code>setMaxUnappliedLogMemory(long)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_MAX_UNAPPLIED_LOG_MEMORY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_COMMIT_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_COMMIT_TIMEOUT</h4>
<pre>public static final&nbsp;int DEFAULT_COMMIT_TIMEOUT</pre>
<div class="block">Default transaction commit timeout (5000).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setCommitTimeout(int)"><code>setCommitTimeout(int)</code></a>, 
<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#setTimeout(long)"><code>RaftKVTransaction.setTimeout(long)</code></a>, 
<a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_COMMIT_TIMEOUT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_TCP_PORT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_TCP_PORT</h4>
<pre>public static final&nbsp;int DEFAULT_TCP_PORT</pre>
<div class="block">Default TCP port (9660) used to communicate with peers.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.DEFAULT_TCP_PORT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="OPTION_CONSISTENCY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OPTION_CONSISTENCY</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> OPTION_CONSISTENCY</pre>
<div class="block">Option key for <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction(java.util.Map)"><code>createTransaction(Map)</code></a>. Value should be a <a href="../../../../org/jsimpledb/kv/raft/Consistency.html" title="enum in org.jsimpledb.kv.raft"><code>Consistency</code></a> instance,
 or the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html?is-external=true#name" title="class or interface in java.lang"><code>name()</code></a> thereof.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#org.jsimpledb.kv.raft.RaftKVDatabase.OPTION_CONSISTENCY">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RaftKVDatabase()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RaftKVDatabase</h4>
<pre>public&nbsp;RaftKVDatabase()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setKVStore(org.jsimpledb.kv.mvcc.AtomicKVStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKVStore</h4>
<pre>public&nbsp;void&nbsp;setKVStore(<a href="../../../../org/jsimpledb/kv/mvcc/AtomicKVStore.html" title="interface in org.jsimpledb.kv.mvcc">AtomicKVStore</a>&nbsp;kvstore)</pre>
<div class="block">Configure the <a href="../../../../org/jsimpledb/kv/mvcc/AtomicKVStore.html" title="interface in org.jsimpledb.kv.mvcc"><code>AtomicKVStore</code></a> in which local persistent state is stored.

 <p>
 Required property.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>kvstore</code> - local persistent data store</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd></dl>
</li>
</ul>
<a name="setLogDirectory(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLogDirectory</h4>
<pre>public&nbsp;void&nbsp;setLogDirectory(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;directory)</pre>
<div class="block">Configure the directory in which uncommitted log entries are stored.

 <p>
 Required property.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>directory</code> - log directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd></dl>
</li>
</ul>
<a name="getLogDirectory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogDirectory</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getLogDirectory()</pre>
<div class="block">Get the directory in which uncommitted log entries are stored.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>configured log directory</dd></dl>
</li>
</ul>
<a name="setNetwork(org.dellroad.stuff.net.Network)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setNetwork</h4>
<pre>public&nbsp;void&nbsp;setNetwork(org.dellroad.stuff.net.Network&nbsp;network)</pre>
<div class="block">Configure the <code>Network</code> to use for inter-node communication.

 <p>
 By default, a <code>TCPNetwork</code> instance communicating on <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_TCP_PORT"><code>DEFAULT_TCP_PORT</code></a> is used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>network</code> - network implementation; must not be started</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd></dl>
</li>
</ul>
<a name="setIdentity(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIdentity</h4>
<pre>public&nbsp;void&nbsp;setIdentity(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;identity)</pre>
<div class="block">Configure the Raft identity.

 <p>
 Required property.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>identity</code> - unique Raft identity of this node in its cluster</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd></dl>
</li>
</ul>
<a name="getIdentity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIdentity</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getIdentity()</pre>
<div class="block">Get this node's Raft identity.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the unique identity of this node in its cluster</dd></dl>
</li>
</ul>
<a name="setMinElectionTimeout(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMinElectionTimeout</h4>
<pre>public&nbsp;void&nbsp;setMinElectionTimeout(int&nbsp;timeout)</pre>
<div class="block">Configure the minimum election timeout.

 <p>
 This must be set to a value greater than the <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setHeartbeatTimeout(int)">heartbeat timeout</a>.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MIN_ELECTION_TIMEOUT"><code>DEFAULT_MIN_ELECTION_TIMEOUT</code></a>.

 <p>
 <b>Warning:</b> currently all nodes must have the same configured minimum election timeout,
 otherwise read-only transactions are not guaranteed to be completely up-to-date.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - minimum election timeout in milliseconds</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>timeout &lt;= 0</code></dd></dl>
</li>
</ul>
<a name="getMinElectionTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinElectionTimeout</h4>
<pre>public&nbsp;int&nbsp;getMinElectionTimeout()</pre>
<div class="block">Get the configured minimum election timeout.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>minimum election timeout in milliseconds</dd></dl>
</li>
</ul>
<a name="setMaxElectionTimeout(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxElectionTimeout</h4>
<pre>public&nbsp;void&nbsp;setMaxElectionTimeout(int&nbsp;timeout)</pre>
<div class="block">Configure the maximum election timeout.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_ELECTION_TIMEOUT"><code>DEFAULT_MAX_ELECTION_TIMEOUT</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - maximum election timeout in milliseconds</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>timeout &lt;= 0</code></dd></dl>
</li>
</ul>
<a name="getMaxElectionTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxElectionTimeout</h4>
<pre>public&nbsp;int&nbsp;getMaxElectionTimeout()</pre>
<div class="block">Get the configured maximum election timeout.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>maximum election timeout in milliseconds</dd></dl>
</li>
</ul>
<a name="setHeartbeatTimeout(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHeartbeatTimeout</h4>
<pre>public&nbsp;void&nbsp;setHeartbeatTimeout(int&nbsp;timeout)</pre>
<div class="block">Configure the heartbeat timeout.

 <p>
 This must be set to a value less than the <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMinElectionTimeout(int)">minimum election timeout</a>.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_HEARTBEAT_TIMEOUT"><code>DEFAULT_HEARTBEAT_TIMEOUT</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - heartbeat timeout in milliseconds</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is already started</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>timeout &lt;= 0</code></dd></dl>
</li>
</ul>
<a name="getHeartbeatTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeartbeatTimeout</h4>
<pre>public&nbsp;int&nbsp;getHeartbeatTimeout()</pre>
<div class="block">Get the configured heartbeat timeout.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>heartbeat timeout in milliseconds</dd></dl>
</li>
</ul>
<a name="setMaxTransactionDuration(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxTransactionDuration</h4>
<pre>public&nbsp;void&nbsp;setMaxTransactionDuration(int&nbsp;duration)</pre>
<div class="block">Configure the maximum supported duration for outstanding transactions.

 <p>
 This value is the <i>T<sub>max</sub></i> value from the <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html" title="class in org.jsimpledb.kv.raft">overview</a>.
 A larger value means more memory may be used.

 <p>
 This value may be changed while this instance is already running.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_TRANSACTION_DURATION"><code>DEFAULT_MAX_TRANSACTION_DURATION</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>duration</code> - maximum supported duration for outstanding transactions in milliseconds</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>duration &lt;= 0</code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxUnappliedLogMemory(long)"><code>setMaxUnappliedLogMemory(long)</code></a></dd></dl>
</li>
</ul>
<a name="getMaxTransactionDuration()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxTransactionDuration</h4>
<pre>public&nbsp;int&nbsp;getMaxTransactionDuration()</pre>
<div class="block">Get the configured maximum supported duration for outstanding transactions.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>maximum supported duration for outstanding transactions in milliseconds</dd></dl>
</li>
</ul>
<a name="setMaxUnappliedLogMemory(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxUnappliedLogMemory</h4>
<pre>public&nbsp;void&nbsp;setMaxUnappliedLogMemory(long&nbsp;memory)</pre>
<div class="block">Configure the maximum allowed memory used for unapplied log entries.

 <p>
 This value is the <i>M<sub>max</sub></i> value from the <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html" title="class in org.jsimpledb.kv.raft">overview</a>.
 A higher value means transactions may be larger and/or stay open longer without causing a <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>.

 <p>
 This value is approximate, and only affects leaders; followers always apply committed log entries immediately.

 <p>
 This value may be changed while this instance is already running.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_MAX_UNAPPLIED_LOG_MEMORY"><code>DEFAULT_MAX_UNAPPLIED_LOG_MEMORY</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>memory</code> - maximum allowed memory usage for cached applied log entries</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>memory &lt;= 0</code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#setMaxTransactionDuration(int)"><code>setMaxTransactionDuration(int)</code></a></dd></dl>
</li>
</ul>
<a name="getMaxUnappliedLogMemory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxUnappliedLogMemory</h4>
<pre>public&nbsp;long&nbsp;getMaxUnappliedLogMemory()</pre>
<div class="block">Get the configured maximum allowed memory used for unapplied log entries.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>maximum allowed memory usage for cached applied log entries</dd></dl>
</li>
</ul>
<a name="setCommitTimeout(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCommitTimeout</h4>
<pre>public&nbsp;void&nbsp;setCommitTimeout(int&nbsp;timeout)</pre>
<div class="block">Configure the default transaction commit timeout.

 <p>
 This value determines how transactions will wait once <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#commit()"><code>commit()</code></a>
 is invoked for the commit to succeed before failing with a <a href="../../../../org/jsimpledb/kv/RetryTransactionException.html" title="class in org.jsimpledb.kv"><code>RetryTransactionException</code></a>.
 This can be overridden on a per-transaction basis via <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#setTimeout(long)"><code>RaftKVTransaction.setTimeout(long)</code></a>.

 <p>
 This value may be changed while this instance is already running.

 <p>
 Default is <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#DEFAULT_COMMIT_TIMEOUT"><code>DEFAULT_COMMIT_TIMEOUT</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - transaction commit timeout in milliseconds, or zero for unlimited</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>timeout</code> is negative</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#setTimeout(long)"><code>RaftKVTransaction.setTimeout(long)</code></a></dd></dl>
</li>
</ul>
<a name="getCommitTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitTimeout</h4>
<pre>public&nbsp;int&nbsp;getCommitTimeout()</pre>
<div class="block">Get the configured default transaction commit timeout.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>transaction commit timeout in milliseconds, or zero for unlimited</dd></dl>
</li>
</ul>
<a name="setFollowerProbingEnabled(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFollowerProbingEnabled</h4>
<pre>public&nbsp;void&nbsp;setFollowerProbingEnabled(boolean&nbsp;followerProbingEnabled)</pre>
<div class="block">Configure whether followers should be required to probe for network connectivity with a majority of the
 cluster after an election timeout prior to becoming a candidate.

 <p>
 This value may be changed at any time.

 <p>
 The default is enabled.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>followerProbingEnabled</code> - true to enable, false to disable</dd></dl>
</li>
</ul>
<a name="isFollowerProbingEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFollowerProbingEnabled</h4>
<pre>public&nbsp;boolean&nbsp;isFollowerProbingEnabled()</pre>
<div class="block">Determine whether follower probing prior to becoming a candidate is enabled.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if follower probing is enabled, otherwise false</dd></dl>
</li>
</ul>
<a name="getClusterId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClusterId</h4>
<pre>public&nbsp;int&nbsp;getClusterId()</pre>
<div class="block">Retrieve the unique 32-bit ID for this node's cluster.

 <p>
 A value of zero indicates an unconfigured system. Usually the reverse true, though an unconfigured system
 can have a non-zero cluster ID in the rare case where an error occurred persisting the initial log entry.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the unique ID of this node's cluster, or zero if this node is unconfigured</dd></dl>
</li>
</ul>
<a name="getCurrentConfig()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentConfig</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getCurrentConfig()</pre>
<div class="block">Retrieve the current cluster configuration as understood by this node.

 <p>
 Configuration changes are performed and committed in the context of a normal transaction; see
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html#configChange"><code>RaftKVTransaction.configChange()</code></a>.

 <p>
 If this system is unconfigured, an empty map is returned (and vice-versa).

 <p>
 The returned map is a copy; changes have no effect on this instance.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current configuration mapping from node identity to network address, or empty if this node is unconfigured</dd></dl>
</li>
</ul>
<a name="isConfigured()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isConfigured</h4>
<pre>public&nbsp;boolean&nbsp;isConfigured()</pre>
<div class="block">Determine whether this instance is configured.

 <p>
 A node is configured if and only if it has at least one log entry. The first log entry always
 includes a configuration change that adds the node that created it to the (previously empty) cluster.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if this instance is configured, otherwise false</dd></dl>
</li>
</ul>
<a name="isClusterMember()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClusterMember</h4>
<pre>public&nbsp;boolean&nbsp;isClusterMember()</pre>
<div class="block">Determine whether this node thinks that it is part of its cluster, as determined by its
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentConfig()">current configuration</a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if this instance is part of the cluster, otherwise false</dd></dl>
</li>
</ul>
<a name="isClusterMember(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClusterMember</h4>
<pre>public&nbsp;boolean&nbsp;isClusterMember(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;node)</pre>
<div class="block">Determine whether this node thinks that the specified node is part of the cluster, as determined by its
 <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#getCurrentConfig()">current configuration</a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - node identity</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the specified node is part of the cluster, otherwise false</dd></dl>
</li>
</ul>
<a name="getCurrentRole()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentRole</h4>
<pre>public&nbsp;<a href="../../../../org/jsimpledb/kv/raft/Role.html" title="class in org.jsimpledb.kv.raft">Role</a>&nbsp;getCurrentRole()</pre>
<div class="block">Get this instance's current role: leadeer, follower, or candidate.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current <a href="../../../../org/jsimpledb/kv/raft/Role.html" title="class in org.jsimpledb.kv.raft"><code>Role</code></a>, or null if not running</dd></dl>
</li>
</ul>
<a name="getCurrentTerm()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentTerm</h4>
<pre>public&nbsp;long&nbsp;getCurrentTerm()</pre>
<div class="block">Get this instance's current term.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current term</dd></dl>
</li>
</ul>
<a name="getCommitIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitIndex</h4>
<pre>public&nbsp;long&nbsp;getCommitIndex()</pre>
<div class="block">Get this instance's current commit index..</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>current commit index</dd></dl>
</li>
</ul>
<a name="getLastAppliedTerm()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAppliedTerm</h4>
<pre>public&nbsp;long&nbsp;getLastAppliedTerm()</pre>
<div class="block">Get this instance's last applied log entry term.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>last applied term</dd></dl>
</li>
</ul>
<a name="getLastAppliedIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastAppliedIndex</h4>
<pre>public&nbsp;long&nbsp;getLastAppliedIndex()</pre>
<div class="block">Get this instance's last applied log entry index.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>last applied index</dd></dl>
</li>
</ul>
<a name="getUnappliedLog()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnappliedLog</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/jsimpledb/kv/raft/LogEntry.html" title="class in org.jsimpledb.kv.raft">LogEntry</a>&gt;&nbsp;getUnappliedLog()</pre>
<div class="block">Get the unapplied <a href="../../../../org/jsimpledb/kv/raft/LogEntry.html" title="class in org.jsimpledb.kv.raft"><code>LogEntry</code></a>s in this instance's Raft log.

 <p>
 The returned list is a copy; changes have no effect on this instance.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>unapplied log entries; or null if this instance is not running</dd></dl>
</li>
</ul>
<a name="getUnappliedLogMemoryUsage()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUnappliedLogMemoryUsage</h4>
<pre>public&nbsp;long&nbsp;getUnappliedLogMemoryUsage()</pre>
<div class="block">Get the estimated total memory used by unapplied log entries.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>unapplied log entry memory usage</dd></dl>
</li>
</ul>
<a name="getOpenTransactions()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOpenTransactions</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a>&gt;&nbsp;getOpenTransactions()</pre>
<div class="block">Get the set of open transactions associated with this database.

 <p>
 The returned set is a copy; changes have no effect on this instance.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>all open transactions</dd></dl>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre><a href="https://docs.oracle.com/javaee/7/api/javax/annotation/PostConstruct.html?is-external=true" title="class or interface in javax.annotation">@PostConstruct</a>
public&nbsp;void&nbsp;start()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#start()">KVDatabase</a></code></strong></div>
<div class="block">Start this instance. This method must be called prior to creating any transactions.

 <p>
 This method is idempotent: if this instance is already started, nothing happens.

 <p>
 Whether an instance that has been started and stopped can be restarted is implementation-dependent.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#start()">start</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></code></dd>
</dl>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre><a href="https://docs.oracle.com/javaee/7/api/javax/annotation/PreDestroy.html?is-external=true" title="class or interface in javax.annotation">@PreDestroy</a>
public&nbsp;void&nbsp;stop()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#stop()">KVDatabase</a></code></strong></div>
<div class="block">Stop this instance.

 <p>
 This method is idempotent: if this instance has not been started, or is already stopped, nothing happens.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#stop()">stop</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></code></dd>
</dl>
</li>
</ul>
<a name="createTransaction()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a>&nbsp;createTransaction()</pre>
<div class="block">Create a new transaction.

 <p>
 Equivalent to: <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#createTransaction(org.jsimpledb.kv.raft.Consistency)"><code>createTransaction</code></a><code>(</code><a href="../../../../org/jsimpledb/kv/raft/Consistency.html#LINEARIZABLE"><code>Consistency.LINEARIZABLE</code></a><code>)</code>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#createTransaction()">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>newly created transaction</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#start()">started</a> or in the process of shutting down</dd></dl>
</li>
</ul>
<a name="createTransaction(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a>&nbsp;createTransaction(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,?&gt;&nbsp;options)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#createTransaction(java.util.Map)">KVDatabase</a></code></strong></div>
<div class="block">Create a new transaction with the specified options.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/jsimpledb/kv/KVDatabase.html#createTransaction(java.util.Map)">createTransaction</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/jsimpledb/kv/KVDatabase.html" title="interface in org.jsimpledb.kv">KVDatabase</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>options</code> - optional transaction options; may be null</dd>
<dt><span class="strong">Returns:</span></dt><dd>newly created transaction</dd></dl>
</li>
</ul>
<a name="createTransaction(org.jsimpledb.kv.raft.Consistency)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransaction</h4>
<pre>public&nbsp;<a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft">RaftKVTransaction</a>&nbsp;createTransaction(<a href="../../../../org/jsimpledb/kv/raft/Consistency.html" title="enum in org.jsimpledb.kv.raft">Consistency</a>&nbsp;consistency)</pre>
<div class="block">Create a new transaction with the specified consistency.

 <p>
 Transactions that wish to use <a href="../../../../org/jsimpledb/kv/raft/Consistency.html#EVENTUAL_COMMITTED"><code>Consistency.EVENTUAL_COMMITTED</code></a> must be created using this method,
 because the log entry on which the transaction is based is determined at creation time.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>consistency</code> - consistency level</dd>
<dt><span class="strong">Returns:</span></dt><dd>newly created transaction</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <code>consistency</code> is null</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this instance is not <a href="../../../../org/jsimpledb/kv/raft/RaftKVDatabase.html#start()">started</a> or in the process of shutting down</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RaftKVDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/jsimpledb/kv/raft/NonLeaderRole.html" title="class in org.jsimpledb.kv.raft"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/jsimpledb/kv/raft/RaftKVTransaction.html" title="class in org.jsimpledb.kv.raft"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/jsimpledb/kv/raft/RaftKVDatabase.html" target="_top">Frames</a></li>
<li><a href="RaftKVDatabase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
